"""
ğŸ”§ BUGFIX - TTS TEXT NORMALIZATION
Oprava: Regex pro normalizaci textu byla pokazena
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLÃ‰M:
â”€â”€â”€â”€â”€â”€â”€â”€
TTS engine mÄ›l BUG v normalizaci - nahrazoval znaky kterÃ© nemÄ›l:
  â€¢ 'DobrÃ½ den' â†’ 'DobrÃ¡zek den' âŒ (nahradil "DobrÃ½" â†’ "DobrÃ¡zek"?!)
  â€¢ 'JakÃ½koliv ... mÃ¡te na srdci' â†’ 'JakÃ½koliv ... mÃ¡te nakciovÃ¡ spoleÄnostdci' âŒ

PÅ˜ÃÄŒINA:
â”€â”€â”€â”€â”€â”€â”€â”€
Regex pro nahrazovÃ¡nÃ­ zkratek byl pÅ™Ã­liÅ¡ liberÃ¡lnÃ­:
  â€¢ Pattern: zkratka.replace(zkratka, rozepsane, flags=re.IGNORECASE)
  â€¢ ProblÃ©m: Case-insensitive search hledal "s.r.o." v kaÅ¾dÃ©m slovÄ›
  â€¢ VÃ½sledek: ZniÄilo bÄ›Å¾nÃ½ text

Å˜EÅ ENÃ:
â”€â”€â”€â”€â”€â”€â”€
ZmÄ›nilo se z:
  zkratky = {'s.r.o.': 'akciovÃ¡ spoleÄnost', ...}
  for zkratka, rozepsane in zkratky.items():
      normalized = re.sub(zkratka, rozepsane, flags=re.IGNORECASE)

Na:
  zkratky_regex = [
      (r'\s+atd\.\s+', ' a tak dÃ¡le ', re.IGNORECASE),  # POUZE s mezerami!
      (r'^atd\.\s+', 'a tak dÃ¡le ', re.IGNORECASE),     # POUZE na zaÄÃ¡tku
      ...
  ]
  for pattern, replacement, flags in zkratky_regex:
      normalized = re.sub(pattern, replacement, flags=flags)

âœ… VÃSLEDEK:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NynÃ­ zkratky nahrazujeme POUZE pokud:
  â€¢ MajÃ­ teÄku (\.):
  â€¢ Jsou obklopeny mezerami (\s+) NEBO na zaÄÃ¡tku (^)
  â€¢ PomocÃ­ REGEX s word boundaries

PÅ™Ã­klady:
  'DobrÃ½ den' â†’ 'DobrÃ½ den' âœ… (Bez zmÄ›ny - nikdy "DobrÃ½" nenÃ­ zkratka)
  ' atd. vÃ­ce' â†’ ' a tak dÃ¡le vÃ­ce' âœ… (Zkratka s mezerami)
  'JakÃ½koliv dotaz ... mÃ¡te na srdci?' â†’ '...' âœ… (Bez zmÄ›ny - nenÃ­ zkratka)

TAKÃ‰ FIXED:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
OdstranÄ›ny Unicode znaky ze TTSEngine init:
  'TTSEngine OK' mÃ­sto 'TTSEngine âœ“ OK'
  'Normalized' mÃ­sto 'NormalizÃ¡no ğŸ‡¨ğŸ‡¿'
  
DÅ¯vod: Windows PowerShell mÃ¡ problÃ©my s Unicode v print()

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STATUS: âœ… OPRAVENO

Normalizace nynÃ­:
  âœ… Konvertuje Äasy: "14:00" â†’ "ÄtrnÃ¡ct hodin"
  âœ… Konvertuje ÄÃ­sla: "5" â†’ "pÄ›t"
  âœ… NEOHROÅ½UJE bÄ›Å¾nÃ½ text
  âœ… BezpeÄnÄ› nahrazuje POUZE zkratky s teÄkou a mezerami

READY TO ROLL! ğŸš€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

if __name__ == '__main__':
    print(__doc__)
